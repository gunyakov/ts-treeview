(()=>{"use strict";var t,e;!function(t){t.itemclick="item.click",t.itemdblclick="item.dblclick",t.folderclick="folder.click",t.folderdblclick="folder.dblclick",t.itemcheckbox="item.checkbox",t.foldercheckbox="folder.checkbox",t.folderadd="folder.add",t.folderedit="folder.edit",t.folderdelete="folder.delete",t.itemadd="item.add",t.itemedit="item.edit",t.itemdelete="item.delete"}(t||(t={})),function(t){t.item="item",t.folder="folder",t.both="both"}(e||(e={}));var o=function(){function e(){this._callbacks=[]}return e.prototype.fire=function(t,e,o,i,n,s){void 0===e&&(e=!1),void 0===o&&(o=!1),void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===s&&(s=!1);var r=this._callbacks[t];r?r(e,o,i,n,s):console.log("Callback ".concat(t," have no assigned function."))},e.prototype.on=function(e,o){Object.values(t).includes(e)?this._callbacks[e]=o:console.log("Wrong event type. Pls check it again",e)},e}();function i(t,e){return e.length>0&&e.forEach((function(e){t.classList.add(e)})),t}function n(t,e,o){return i(t=function(t,e){return e.length>0&&e.forEach((function(e){t.classList.remove(e)})),t}(t,e),o)}function s(t,e,o){void 0===e&&(e=[]),void 0===o&&(o="");var n=document.createElement(t);return o.length>0&&(n.type=o),i(n,e)}var r=function(){return r=Object.assign||function(t){for(var e,o=1,i=arguments.length;o<i;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},r.apply(this,arguments)},l=function(t,e,o){if(o||2===arguments.length)for(var i,n=0,s=e.length;n<s;n++)!i&&n in e||(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))};const a=function(){function i(t){var e=this;if(this._el=null,this._options={element:"treeview",class:["treeview","w-20","border","my-4"],header:"Demo header",headerClass:["pt-3","pl-3"],editable:!1,items:[],listClass:["mb-1","pl-3","pb-2"],subListClass:["nested"],listSubClass:["closed"],listSubArrowClass:["fas","fa-angle-right","rotate"],checkBoxClass:["mx-1","form-check-input"],itemClass:[],button:{add:!1,edit:!1,delete:!1},buttons:{class:["float-end","me-1","cursor-pointer"],green:["text-success"],red:["text-danger"],blue:["text-info"],yellow:["text-warning"],addIcon:["fas","fa-plus"],editIcon:["fas","fa-edit"],deleteIcon:["fas","fa-trash"]},animate:!1,animateSpeed:500},this._CB=new o,this._options=r(r({},this._options),t),this._el=document.getElementById(this._options.element),this._el){this._options.class.forEach((function(t){var o;null===(o=e._el)||void 0===o||o.classList.add(t)})),"true"==this._el.getAttribute("tl-animate")&&(this._options.animate=!0);var i=parseInt(this._el.getAttribute("tl-animatespeed"));i>0&&(this._options.animateSpeed=i),this._options.items.length>0&&this._drawHTML(),this._init()}}return i.prototype.setElements=function(t){t&&(null==t||t.length)},i.prototype.on=function(t,e){this._CB.on(t,e)},i.prototype._init=function(){var t,e=null===(t=this._el)||void 0===t?void 0:t.getElementsByTagName("ul")[0];void 0!==e&&this._events(e)},i.prototype._events=function(e,o){var i=this;void 0===o&&(o="");var r=this._CB,l=this;if(void 0!==e)for(var a=e.children,c=function(e){var c=a[e],p=0==o.length?e.toString():o+":"+e.toString();c.getAttribute("tl-id")||c.setAttribute("tl-id",p);var u=c.querySelector(":scope > ul"),h=c.querySelector(":scope > a");if(u&&h){d._events(u,p),h.addEventListener("click",(function(e){if(e.stopPropagation(),1==e.detail){r.fire(t.folderclick,c.getAttribute("tl-id")),h.classList.toggle("open");var o=h.querySelector(":scope > i");o&&o.classList.toggle("down");var i=h.querySelector(":scope > span > i"),s="",a="";i&&(s=i.getAttribute("class-close"),a=i.getAttribute("class-open")),u.classList.contains("active")?(u.classList.remove("active"),l._options.animate?(d=u,p=l._options.animateSpeed,d.style.transitionProperty="height, margin, padding",d.style.transitionDuration=p+"ms",d.style.boxSizing="border-box",d.style.height=d.offsetHeight+"px",d.offsetHeight,d.style.overflow="hidden",d.style.height="0",d.style.paddingTop="0",d.style.paddingBottom="0",d.style.marginTop="0",d.style.marginBottom="0",window.setTimeout((function(){d.style.display="none",d.style.removeProperty("height"),d.style.removeProperty("padding-top"),d.style.removeProperty("padding-bottom"),d.style.removeProperty("margin-top"),d.style.removeProperty("margin-bottom"),d.style.removeProperty("overflow"),d.style.removeProperty("transition-duration"),d.style.removeProperty("transition-property")}),p)):u.style.display="none",s&&a&&n(i,a.split(" "),s.split(" "))):(u.classList.add("active"),l._options.animate?function(t,e){t.style.removeProperty("display");var o=window.getComputedStyle(t).display;"none"===o&&(o="block"),t.style.display=o;var i=t.offsetHeight;t.style.overflow="hidden",t.style.height="0",t.style.paddingTop="0",t.style.paddingBottom="0",t.style.marginTop="0",t.style.marginBottom="0",t.offsetHeight,t.style.boxSizing="border-box",t.style.transitionProperty="height, margin, padding",t.style.transitionDuration=e+"ms",t.style.height=i+"px",t.style.removeProperty("padding-top"),t.style.removeProperty("padding-bottom"),t.style.removeProperty("margin-top"),t.style.removeProperty("margin-bottom"),window.setTimeout((function(){t.style.removeProperty("height"),t.style.removeProperty("overflow"),t.style.removeProperty("transition-duration"),t.style.removeProperty("transition-property")}),e)}(u,l._options.animateSpeed):u.style.display="block",s&&a&&n(i,s.split(" "),a.split(" ")))}var d,p;2==e.detail&&r.fire(t.folderdblclick,c.getAttribute("tl-id"))}));var f=h.querySelector(":scope > input[type='checkbox']");null==f||f.addEventListener("click",(function(e){e.stopPropagation(),r.fire(t.foldercheckbox,c.getAttribute("tl-id"),f.checked)})),h.querySelectorAll("[tl-event]").forEach((function(e){e.addEventListener("click",(function(o){switch(o.stopPropagation(),e.getAttribute("tl-event")){case"add":r.fire(t.folderadd,c.getAttribute("tl-id"));break;case"edit":r.fire(t.folderedit,c.getAttribute("tl-id"));break;case"delete":r.fire(t.folderdelete,c.getAttribute("tl-id"))}}))}))}else{var v=c.querySelector(":scope > input[type='checkbox']");null==v||v.addEventListener("click",(function(e){e.stopPropagation(),r.fire(t.itemcheckbox,c.getAttribute("tl-id"),v.checked)})),c.addEventListener("click",(function(e){e.stopPropagation(),1==e.detail?r.fire(t.itemclick,c.getAttribute("tl-id")):r.fire(t.itemdblclick,c.getAttribute("tl-id"))})),c.querySelectorAll("[tl-event]").forEach((function(e){e.addEventListener("click",(function(o){switch(o.stopPropagation(),e.getAttribute("tl-event")){case"add":r.fire(t.itemadd,c.getAttribute("tl-id"));break;case"edit":r.fire(t.itemedit,c.getAttribute("tl-id"));break;case"delete":r.fire(t.itemdelete,c.getAttribute("tl-id"))}}))}))}c.addEventListener("dblclick",(function(t){if(t.stopPropagation(),i._options.editable){var e=function(){var t=s("span",["input-group"]),e=s("input",["form-control","form-control-sm"]);e.type="text",e.setAttribute("placeholder","Enter new name"),t.append(e);var o=s("button",["btn","btn-outline-secondary","form-control-sm"]);o.type="button";var i=s("i",["fas","fa-save"]);return o.append(i),t.append(o),t}();e.style.height=h.offsetHeight+"px";var o=c.getElementsByTagName("span")[0];o&&h&&(h.append(e),o.style.display="none")}}))},d=this,p=0;p<a.length;p++)c(p)},i.prototype.checkbox=function(t,o){var i;void 0===o&&(o=e.both),this._clearCheckBox();var n=null===(i=this._el)||void 0===i?void 0:i.querySelector(":scope > ul");n&&this._makeCheckBox(t,o,n)},i.prototype.update=function(t){var e=this._el.querySelector("[tr-id='".concat(t.id,"]"));return!!e&&(e.replaceWith(this._makeItem(t,t.id)),this._events(e),!0)},i.prototype.remove=function(t){var e=this._el.querySelector("[tr-id='".concat(t,"]"));return!!e&&(e.remove(),!0)},i.prototype._clearCheckBox=function(){var t;(null===(t=this._el)||void 0===t?void 0:t.querySelector(":scope > ul")).querySelectorAll("input[type='checkbox']").forEach((function(t){t.remove()}))},i.prototype._makeCheckBox=function(o,i,n){if(o){var r=this._CB;if(n)for(var l=n.children,a=function(n){var a=l[n],d=a.querySelector(":scope > a")||null,p=a.querySelector(":scope > input[type='checkbox']")||(null==d?void 0:d.querySelector(":scope > input[type='checkbox']"));if(!p&&o){if(p=s("input",c._options.checkBoxClass,"checkbox"),d&&(i==e.both||i==e.folder)){var u=d.querySelector(":scope > span");u&&(p.addEventListener("click",(function(e){e.stopPropagation(),r.fire(t.foldercheckbox,a.getAttribute("tl-id"),p.checked)})),u.prepend(p))}d||i!=e.item&&i!=e.both||(p.addEventListener("click",(function(e){e.stopPropagation(),r.fire(t.itemcheckbox,a.getAttribute("tl-id"),p.checked)})),a.prepend(p));var h=a.querySelector(":scope > ul");h&&c._makeCheckBox(o,i,h)}},c=this,d=0;d<l.length;d++)a(d)}},i.prototype._makeHeader=function(){var t,e,o=function(t,e){void 0===e&&(e=[]);var o=s("h6",e);return o.innerText=t,o}(this._options.header,this._options.headerClass);null===(t=this._el)||void 0===t||t.append(o),null===(e=this._el)||void 0===e||e.append(document.createElement("hr"))},i.prototype._makeItem=function(t,e){var o,i,n,r,a,c,d=s("li",this._options.itemClass);if(t.id?d.setAttribute("tl-id",t.id):d.setAttribute("tl-id",e),t.items){var p=s("a",this._options.listSubClass),u=s("i",this._options.listSubArrowClass);p.append(u);var h=s("span");if(t.checkBox&&h.append(s("input",this._options.checkBoxClass,"checkbox")),t.icon){var f=s("i",l(l([],t.icon,!0),["ic-w","mx-1"],!1));t.icon&&f.setAttribute("class-close",t.icon.join(" ")),t.iconOpen&&f.setAttribute("class-open",t.iconOpen.join(" ")),h.append(f)}h.append(t.text),p.append(h),((null===(o=t.button)||void 0===o?void 0:o.delete)||this._options.button.delete)&&((y=s("i",l(l(l([],this._options.buttons.class,!0),this._options.buttons.red,!0),this._options.buttons.deleteIcon,!0))).setAttribute("tl-event","delete"),p.append(y)),((null===(i=t.button)||void 0===i?void 0:i.edit)||this._options.button.edit)&&((y=s("i",l(l(l([],this._options.buttons.class,!0),this._options.buttons.yellow,!0),this._options.buttons.editIcon,!0))).setAttribute("tl-event","edit"),p.append(y)),((null===(n=t.button)||void 0===n?void 0:n.add)||this._options.button.add)&&((y=s("i",l(l(l([],this._options.buttons.class,!0),this._options.buttons.green,!0),this._options.buttons.addIcon,!0))).setAttribute("tl-event","add"),p.append(y)),d.append(p);var v=s("ul",this._options.subListClass);v.style.display="none";for(var b=0;b<t.items.length;b++)v.append(this._makeItem(t.items[b],e+":"+b.toString()));d.append(v)}else{var y;t.checkBox&&d.append(s("input",this._options.checkBoxClass,"checkbox")),t.icon&&(f=s("i",l(l([],t.icon,!0),["ic-w","mx-1"],!1)),t.icon&&f.setAttribute("class-close",t.icon.join(" ")),t.iconOpen&&f.setAttribute("class-open",t.iconOpen.join(" ")),d.append(f)),d.append(t.text),((null===(r=t.button)||void 0===r?void 0:r.delete)||this._options.button.delete)&&((y=s("i",l(l(l([],this._options.buttons.class,!0),this._options.buttons.red,!0),this._options.buttons.deleteIcon,!0))).setAttribute("tl-event","delete"),d.append(y)),((null===(a=t.button)||void 0===a?void 0:a.edit)||this._options.button.edit)&&((y=s("i",l(l(l([],this._options.buttons.class,!0),this._options.buttons.yellow,!0),this._options.buttons.editIcon,!0))).setAttribute("tl-event","edit"),d.append(y)),((null===(c=t.button)||void 0===c?void 0:c.add)||this._options.button.add)&&((y=s("i",l(l(l([],this._options.buttons.class,!0),this._options.buttons.green,!0),this._options.buttons.addIcon,!0))).setAttribute("tl-event","add"),d.append(y))}return d},i.prototype._drawHTML=function(){var t,e=this;this._el&&(this._el.innerHTML=""),this._options.header&&this._makeHeader();var o=s("ul",this._options.listClass);this._options.items.forEach((function(t,i){o.append(e._makeItem(t,i.toString()))})),null===(t=this._el)||void 0===t||t.append(o)},i}();(function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;throw new Error("Unable to locate global object.")}()).TreeList=a})();